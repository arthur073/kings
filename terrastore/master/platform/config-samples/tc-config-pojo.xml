<?xml version="1.0" encoding="UTF-8"?>
<!--

All content copyright Terracotta, Inc., unless otherwise indicated. All rights reserved.



-->
<!--
 This is a Terracotta configuration file that has been pre-configured
 for use with DSO.  All classes are included for instrumentation,
 and all instrumented methods are write locked.

 For more information, please see the product documentation.
-->
<tc:tc-config xmlns:tc="http://www.terracotta.org/config"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.terracotta.org/schema/terracotta-6.xsd">
  <servers>

    <!-- Tell DSO where the Terracotta server can be found. -->
    <server host="localhost">
      <data>%(user.home)/terracotta/server-data</data>
      <logs>%(user.home)/terracotta/server-logs</logs>
    </server>
  </servers>

  <!-- Tell DSO where to put the generated client logs -->  
  <clients>
    <logs>%(user.home)/terracotta/client-logs</logs>
  </clients>

  <application>
    <dso>

        <!-- Start by including just the classes you expect to get added to the shared 
             graph.  These typically include domain classes and shared data structures.  
             If you miss classes, Terracotta will throw NonPortableOjectExceptions 
             telling you more about what needs to be added. -->
      <instrumented-classes>
        <include>
          <class-expression>com.mydomain.myapp.mymodels..*</class-expression>
        </include>
      </instrumented-classes>

      <!-- Apply write level autolocks for all instrumented methods.
           It's more efficient to create finer-grain locks as dictated
           by your application needs.
        -->
      <locks>
        <autolock>
          <lock-level>write</lock-level>
          <method-expression>* com.mydomain.myapp.mymodels..*.*(..)</method-expression>
        </autolock>
      </locks>
    </dso>
  </application>

</tc:tc-config>
